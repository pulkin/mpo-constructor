(this["webpackJsonpmpo-constructor"]=this["webpackJsonpmpo-constructor"]||[]).push([[0],{20:function(e,t,a){"use strict";a.d(t,"a",(function(){return v}));var n=a(7),s=a(8),i=a(3),l=a(11),r=a(10),c=a(0),o=a.n(c);function u(e){e.preventDefault()}var d=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){d=!0}}))}catch(m){}var h="onwheel"in document.createElement("div")?"wheel":"mousewheel",p=!!d&&{passive:!1};var b=a(1);var v=function(e){Object(l.a)(a,e);var t=Object(r.a)(a);function a(e){var s;Object(n.a)(this,a),s=t.call(this,e);var l=parseInt(e.min,10),r=parseInt(e.max,10),c=parseInt(e.val,10);return isNaN(l)&&(l=0),isNaN(r)&&(r=100),isNaN(c)&&(c=l),s.state={min:l,max:r,visible_val:c,val:c},s.handleScroll=s.handleScroll.bind(Object(i.a)(s)),s.handleChange=s.handleChange.bind(Object(i.a)(s)),s.handlePlus=s.handlePlus.bind(Object(i.a)(s)),s.handleMinus=s.handleMinus.bind(Object(i.a)(s)),s}return Object(s.a)(a,[{key:"maybeUpdate",value:function(e){return!isNaN(e)&&this.state.min<=e&&e<=this.state.max&&(this.setState({visible_val:e,val:e}),this.props.onChange&&this.props.onChange(e),!0)}},{key:"componentDidMount",value:function(){this.props.onChange&&this.props.onChange(this.state.val)}},{key:"handleScroll",value:function(e){this.maybeUpdate(this.state.val-Math.sign(e.deltaY))}},{key:"handlePlus",value:function(e){this.maybeUpdate(this.state.val+1)}},{key:"handleMinus",value:function(e){this.maybeUpdate(this.state.val-1)}},{key:"handleChange",value:function(e){var t,a=e.target.value,n=/^[0-9]+$/.test(t=a)?Number(t):NaN;this.maybeUpdate(n)||this.setState({visible_val:a})}},{key:"handleEnter",value:function(e){window.addEventListener(h,u,p)}},{key:"handleLeave",value:function(e){window.removeEventListener(h,u,p)}},{key:"render",value:function(){var e="scroll-container cell-flex";return this.state.val!==this.state.visible_val&&(e+=" scroll-container-invalid"),Object(b.jsxs)("div",{className:e,onWheel:this.handleScroll,onMouseEnter:this.handleEnter,onMouseLeave:this.handleLeave,children:[Object(b.jsx)("label",{children:this.props.label}),Object(b.jsx)("input",{type:"text",onChange:this.handleChange,value:this.state.visible_val}),Object(b.jsx)("button",{className:"cell cell-symbol",onClick:this.handlePlus,disabled:this.state.val===this.state.max,children:"+"}),Object(b.jsx)("button",{className:"cell cell-symbol",onClick:this.handleMinus,disabled:this.state.val===this.state.min,children:"-"})]})}}]),a}(o.a.Component)},26:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return O}));var n=a(7),s=a(8),i=a(3),l=a(11),r=a(10),c=a(23),o=a(4),u=a(0),d=a.n(u),h=(a(43),a(27)),p=a(29),b=a(20),v=a(1),m=["\u2205",null,"1","n",null,"\u03c3<sup>z</sup>","\u03c3<sup>y</sup>","\u03c3<sup>x</sup>","\u03c3<sup>+</sup>","\u03c3<sup>-</sup>",null,"a","a<sup>\u2020</sup>","b","b<sup>\u2020</sup>","c","c<sup>\u2020</sup>",null,"A","B","C","D",null];function j(e,t){var a=e.length;if(a<t){for(var n=e.map((function(e){for(var n=a;n<t;n++)e.splice(-1,0,"");return e})),s=a;s<t;s++){var i=Array(t);i.fill(""),n.splice(-1,0,i)}return n}if(a>t){for(var l=e.map((function(e){for(var n=t;n<a;n++)e.splice(-2,1);return e})),r=t;r<a;r++)l.splice(-2,1);return l}return e.map((function(e){return Object(o.a)(e)}))}var f=function(t){Object(l.a)(u,t);var a=Object(r.a)(u);function u(t){var s;Object(n.a)(this,u),s=a.call(this,t);var l=new URLSearchParams(window.location.search);try{s.state=function(t){var a,n,s=t.split("-"),i=Object(c.a)(s);return a=i[0],n=i.slice(1),a=parseInt(a,10),n=n.map((function(t,n){var s,i=0,l=[],r=t.split("."),o=Object(c.a)(r);i=o[0],s=o.slice(1),i=parseInt(i,10),s=s.map((function(t){return e(t+"==","base64").toString()}));for(var u=0;u<a;u++)l[u]=s.slice(u*a,(u+1)*a);return{copies:i,matrix:l,uid:n}})),{mpo_size:a,mpo:n}}(l.get("mpo"))}catch(r){s.state={mpo_size:2,mpo:[{matrix:[["1",""],["A","1"]],copies:1,uid:0}]}}return s.handleMPOSizeUpdate=s.handleMPOSizeUpdate.bind(Object(i.a)(s)),s}return Object(s.a)(u,[{key:"handleUpdate",value:function(e,t,a){var n=Object(o.a)(this.state.mpo);n[e].matrix=t,n[e].copies=a,this.setState({mpo:n})}},{key:"handleClone",value:function(e){var t=Object(o.a)(this.state.mpo),a=[];t.forEach((function(e){a[e.uid]=!0}));var n=0;for(n=0;n<a.length&&void 0!==a[n];n++);t.splice(e+1,0,{copies:1,matrix:j(t[e].matrix),uid:n}),this.setState({mpo:t})}},{key:"handleDelete",value:function(e){var t=Object(o.a)(this.state.mpo);t.splice(e,1),this.setState({mpo:t})}},{key:"handleSwap",value:function(e,t){var a=Object(o.a)(this.state.mpo),n=[a[t],a[e]];a[e]=n[0],a[t]=n[1],this.setState({mpo:a})}},{key:"handleMPOSizeUpdate",value:function(e){this.setState({mpo:this.state.mpo.map((function(t){return{copies:t.copies,matrix:j(t.matrix,e),uid:t.uid}})),mpo_size:e})}},{key:"render",value:function(){var t,a,n=this,s=[(a=this.state).mpo_size].concat(Object(o.a)(a.mpo.map((function(t){return[t.copies].concat(Object(o.a)(t.matrix.flat().map((function(t){return e(t).toString("base64").replace(/=+$/,"")})))).join(".")})))).join("-"),i=[];this.state.mpo&&(i=Object(h.a)((t=[]).concat.apply(t,Object(o.a)(this.state.mpo.map((function(e){return Array(e.copies).fill(e.matrix)}))))));var l=0;return Object(v.jsxs)("div",{className:"main-panel",children:[Object(v.jsx)(b.a,{min:"2",max:"20",val:this.state.mpo_size,onChange:this.handleMPOSizeUpdate,label:"MPO size:"}),Object(v.jsx)("div",{className:"clear"}),this.state.mpo.map((function(e,t){return l+=e.copies,Object(v.jsx)(p.a,{board:e.matrix,site_offset:l-e.copies,site_len:e.copies,handleUpdate:n.handleUpdate.bind(n,t),handleClone:n.handleClone.bind(n,t),handleDelete:n.handleDelete.bind(n,t),handleMoveUp:n.handleSwap.bind(n,t,t-1),handleMoveDown:n.handleSwap.bind(n,t,t+1),mTerms:m,accent:e.uid,deleteable:n.state.mpo.length>1,canMoveUp:t>0,canMoveDown:t<n.state.mpo.length-1},"board"+t)})),Object(v.jsx)("div",{className:"product",children:"H ="}),Object(v.jsx)("div",{className:"product-block",children:i.map((function(e,t){return Object(v.jsx)("div",{className:"product product-term",dangerouslySetInnerHTML:{__html:e}},t)}))}),Object(v.jsx)("div",{children:Object(v.jsxs)("a",{href:"?mpo="+s,children:[Object(v.jsx)("span",{role:"img","aria-label":"Permalink",children:"\ud83d\udd17"})," ","Permalink to this MPO"]})})]})}}]),u}(d.a.Component);function O(){return Object(v.jsx)(f,{})}}).call(this,a(38).Buffer)},27:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(13),s=a(28),i=a(4);function l(e,t){for(var a=[],n=0;n<t.length;n++){for(var s=t[n],i=[],l=0;l<s.length;l++){var r=s[l],c=e[l],o=!1;if(r&&c)for(var u=0;u<c.length;u++){var d=c[u];if(d){if(i.length>=100||"..."===d){i.push("..."),o=!0;break}i.push(d+"\xb7"+r)}}if(o)break}a.push(i)}return a}function r(e){if(1===e.length){var t=e[0].slice(-1)[0][0];return t?[c(t)]:[]}var a=e[0].map((function(e){return[e[0]]})),n=[e.slice(-1)[0].slice(-1)[0]];return[a].concat(Object(i.a)(e.slice(1,-1)),[n]).reduce(l)[0].map(c)}function c(e){if("..."===e)return e;var t,a=[],i=Object(s.a)(e.split("\xb7").entries());try{for(i.s();!(t=i.n()).done;){var l=Object(n.a)(t.value,2),r=l[0],c=l[1];"1"!==c&&a.push(c+"<sub>"+r+"</sub>")}}catch(o){i.e(o)}finally{i.f()}return 0===a.length?"1":a.join("\xb7")}},29:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var n=a(7),s=a(8),i=a(3),l=a(11),r=a(10),c=a(14),o=a(13),u=a(0),d=a.n(u),h=a(25),p=a(24),b=a(47),v=a(20),m=a(1);function j(e){var t=e.operators,a=e.onItemChoose,n=Object(h.b)({flip:!0,offset:[0,8]}),s=Object(o.a)(n,2),i=s[0],l=s[1].toggle,r=0;return Object(m.jsxs)("div",Object(c.a)(Object(c.a)({className:"operator-panel",role:"menu"},i),{},{children:[t.map((function(e,t){return e?Object(m.jsx)("button",{className:"operator-panel-item cell-group-"+r,onClick:function(){a(e),l(!1)},dangerouslySetInnerHTML:{__html:e}},t):(r++,Object(m.jsx)("div",{className:"clear"},t))})),Object(m.jsxs)("div",{className:"operator-panel-item-free",children:[Object(m.jsx)("label",{children:"custom:"}),Object(m.jsx)("input",{onChange:function(e){a(e.target.value)}})]})]}))}function f(e){var t=e.value,a=e.className,n=Object(p.b)(),s=Object(o.a)(n,2),i=s[0],l=s[1].toggle;return Object(m.jsx)("button",Object(c.a)(Object(c.a)({type:"button",className:a},i),{},{onClick:l,dangerouslySetInnerHTML:{__html:t}}))}var O=function(e){var t=e.show,a=e.onToggle,n=e.onChange,s=e.drop,i=e.alignEnd,l=e.value,r=e.options,c=e.className;return Object(m.jsx)(b.a,{show:t,onToggle:a,drop:s,alignEnd:i,itemSelector:"button:not(:disabled)",children:Object(m.jsxs)("span",{children:[Object(m.jsx)(f,{value:l,className:c}),Object(m.jsx)(j,{operators:r,onItemChoose:n})]})})};function x(e){return Object(m.jsx)(O,{className:"cell cell-dropdown cell-matrix cell-no-role",onChange:e.onChange,value:e.value,options:e.options})}var g=function(e){Object(l.a)(a,e);var t=Object(r.a)(a);function a(e){var s;return Object(n.a)(this,a),(s=t.call(this,e)).state={board:s.props.board,site_len:parseInt(s.props.site_len,10)},s.handleSiteLenUpdate=s.handleSiteLenUpdate.bind(Object(i.a)(s)),s.handleSiteOffsetUpdate=s.handleSiteOffsetUpdate.bind(Object(i.a)(s)),s}return Object(s.a)(a,[{key:"handleUpdate",value:function(e,t,a){var n=this.state.board;n[e][t]="\u2205"===a?"":a,this.setState({board:n}),this.notifyListeners(n,null)}},{key:"notifyListeners",value:function(e,t){this.props.handleUpdate&&(null===e&&(e=this.state.board),null===t&&(t=this.state.site_len),this.props.handleUpdate(e,t))}},{key:"handleSiteLenUpdate",value:function(e){this.setState({site_len:e}),this.notifyListeners(null,e)}},{key:"handleSiteOffsetUpdate",value:function(e){this.setState({site_offset:e})}},{key:"componentDidUpdate",value:function(e,t){this.props.board!==e.board&&this.setState({board:this.props.board})}},{key:"render",value:function(){for(var e=[],t=0;t<this.state.board.length;t++){for(var a=this.state.board[t],n=0;n<a.length;n++)e.push(Object(m.jsx)(x,{onChange:this.handleUpdate.bind(this,t,n),value:a[n],options:this.props.mTerms},"c"+t.toString()+"/"+n.toString()));e.push(Object(m.jsx)("div",{className:"clear"},"eol"+t.toString()))}return this.boardItems=e,Object(m.jsxs)("div",{className:"board-wrapper accent-"+this.props.accent,children:[Object(m.jsxs)("div",{className:"board-wrapper-controls",children:[Object(m.jsx)(v.a,{min:"1",max:"99",val:this.props.site_len,onChange:this.handleSiteLenUpdate,label:"sites: "}),Object(m.jsx)("button",{className:"cell cell-symbol push",title:"Swap upwards",onClick:this.props.handleMoveUp,disabled:!this.props.canMoveUp,children:"\u25b2"}),Object(m.jsx)("button",{className:"cell cell-symbol",title:"Swap downwards",onClick:this.props.handleMoveDown,disabled:!this.props.canMoveDown,children:"\u25bc"}),Object(m.jsx)("button",{className:"cell cell-symbol",title:"Duplicate",onClick:this.props.handleClone,children:"\u2398"}),Object(m.jsx)("button",{className:"cell cell-caution cell-symbol",title:"Remove",onClick:this.props.handleDelete,disabled:!this.props.deleteable,children:"\ud83d\uddd1"})]}),Object(m.jsxs)("div",{className:"board-wrapper-equation",children:[Object(m.jsx)("div",{className:"board-title",children:Object(m.jsxs)("p",{children:["H",Object(m.jsxs)("sub",{children:[this.props.site_offset,"..",this.props.site_offset+this.state.site_len-1]})," ","="]})}),Object(m.jsxs)("div",{className:"board-wrapper-matrix",children:[Object(m.jsx)("div",{className:"board-lbracket"}),Object(m.jsx)("div",{className:"board",children:e}),Object(m.jsx)("div",{className:"board-rbracket"})]})]})]})}}]),a}(d.a.Component)},33:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a(15),i=a.n(s),l=a(26),r=a(1),c=document.getElementById("root");i.a.render(Object(r.jsx)(n.StrictMode,{children:Object(r.jsx)(l.a,{})}),c)},43:function(e,t,a){}},[[33,1,2]]]);
//# sourceMappingURL=main.96a9425d.chunk.js.map