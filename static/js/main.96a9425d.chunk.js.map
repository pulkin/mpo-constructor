{"version":3,"sources":["scroll.js","NumberScroll.js","App.js","symmath.js","Cell.js","index.js"],"names":["preventDefault","e","supportsPassive","window","addEventListener","Object","defineProperty","get","wheelEvent","document","createElement","wheelOpt","passive","NumberScroll","props","min","parseInt","max","v","val","isNaN","state","visible_val","handleScroll","bind","handleChange","handlePlus","handleMinus","new_val","this","setState","onChange","maybeUpdate","Math","sign","deltaY","value","e_val","target","test","Number","NaN","removeEventListener","classes","className","onWheel","onMouseEnter","handleEnter","onMouseLeave","handleLeave","label","type","onClick","disabled","React","Component","default_operators","resizeBoard","board","new_size","size","length","new_board","map","row","i","splice","lrow","Array","fill","MainPanel","queryParams","URLSearchParams","location","search","str","mpo_size","mpo","split","item","item_index","plain","copies","matrix","x","Buffer","toString","slice","uid","decodeMPO","error","handleMPOSizeUpdate","ix","len","new_mpo","slots","forEach","undefined","ix2","el","encodedMPO","flat","replace","join","terms","computeTT","concat","terms_count","site_offset","site_len","handleUpdate","handleClone","handleDelete","handleMoveUp","handleSwap","handleMoveDown","mTerms","accent","deleteable","canMoveUp","canMoveDown","index","dangerouslySetInnerHTML","__html","href","role","App","matvec","M","result","j","M_item","v_item","do_exit","k","v_item_term","push","mpo_terms","term","simplify","lhs","rhs","reduce","entries","element","Menu","operators","onItemChoose","useDropdownMenu","flip","offset","toggle","blockCounter","Toggle","useDropdownToggle","DropdownButton","show","onToggle","drop","alignEnd","options","itemSelector","Cell","Board","handleSiteLenUpdate","handleSiteOffsetUpdate","notifyListeners","prevProps","prevState","board_items","boardItems","title","rootElement","getElementById","ReactDOM","render"],"mappings":"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","file":"static/js/main.96a9425d.chunk.js","sourcesContent":["function preventDefault(e) {\n  e.preventDefault();\n}\n\nvar supportsPassive = false;\ntry {\n  window.addEventListener(\n    \"test\",\n    null,\n    Object.defineProperty({}, \"passive\", {\n      get: function () {\n        supportsPassive = true;\n      }\n    })\n  );\n} catch (e) {}\n\nvar wheelEvent =\n  \"onwheel\" in document.createElement(\"div\") ? \"wheel\" : \"mousewheel\";\nvar wheelOpt = supportsPassive ? { passive: false } : false;\n\nexport function scrollOff() {\n  window.addEventListener(wheelEvent, preventDefault, wheelOpt);\n}\n\nexport function scrollOn() {\n  window.removeEventListener(wheelEvent, preventDefault, wheelOpt);\n}\n","import React from \"react\";\nimport { scrollOn, scrollOff } from \"./scroll.js\";\n\nfunction filterInt(value) {\n  if (/^[0-9]+$/.test(value)) return Number(value);\n  return NaN;\n}\n\nexport default class NumberScroll extends React.Component {\n  constructor(props) {\n    super(props);\n    let min = parseInt(props.min, 10);\n    let max = parseInt(props.max, 10);\n    let v = parseInt(props.val, 10);\n    if (isNaN(min)) min = 0;\n    if (isNaN(max)) max = 100;\n    if (isNaN(v)) v = min;\n    this.state = {\n      min: min,\n      max: max,\n      visible_val: v,\n      val: v\n    };\n    this.handleScroll = this.handleScroll.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n    this.handlePlus = this.handlePlus.bind(this);\n    this.handleMinus = this.handleMinus.bind(this);\n  }\n\n  maybeUpdate(new_val) {\n    if (!isNaN(new_val)) {\n      if (this.state.min <= new_val && new_val <= this.state.max) {\n        this.setState({\n          visible_val: new_val,\n          val: new_val\n        });\n        if (this.props.onChange) {\n          this.props.onChange(new_val);\n        }\n        return true;\n      }\n    }\n    return false;\n  }\n\n  componentDidMount() {\n    if (this.props.onChange) {\n      this.props.onChange(this.state.val);\n    }\n  }\n\n  handleScroll(e) {\n    this.maybeUpdate(this.state.val - Math.sign(e.deltaY));\n  }\n\n  handlePlus(e) {\n    this.maybeUpdate(this.state.val + 1);\n  }\n\n  handleMinus(e) {\n    this.maybeUpdate(this.state.val - 1);\n  }\n\n  handleChange(e) {\n    let e_val = e.target.value;\n    let new_val = filterInt(e_val);\n    if (!this.maybeUpdate(new_val)) {\n      this.setState({\n        visible_val: e_val\n      });\n    }\n  }\n\n  handleEnter(e) {\n    scrollOff();\n  }\n\n  handleLeave(e) {\n    scrollOn();\n  }\n\n  render() {\n    let classes = \"scroll-container cell-flex\";\n    if (this.state.val !== this.state.visible_val)\n      classes = classes + \" scroll-container-invalid\";\n    return (\n      <div\n        className={classes}\n        onWheel={this.handleScroll}\n        onMouseEnter={this.handleEnter}\n        onMouseLeave={this.handleLeave}\n      >\n        <label>{this.props.label}</label>\n        <input\n          type=\"text\"\n          onChange={this.handleChange}\n          value={this.state.visible_val}\n        />\n        <button\n          className=\"cell cell-symbol\"\n          onClick={this.handlePlus}\n          disabled={this.state.val === this.state.max}\n        >\n          +\n        </button>\n        <button\n          className=\"cell cell-symbol\"\n          onClick={this.handleMinus}\n          disabled={this.state.val === this.state.min}\n        >\n          -\n        </button>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\n\nimport \"./styles.css\";\nimport { computeTT } from \"./symmath.js\";\nimport { Board } from \"./Cell.js\";\nimport NumberScroll from \"./NumberScroll.js\";\n\nlet default_operators = [\n  \"∅\",\n  null,\n  \"1\",\n  \"n\",\n  null,\n  \"σ<sup>z</sup>\",\n  \"σ<sup>y</sup>\",\n  \"σ<sup>x</sup>\",\n  \"σ<sup>+</sup>\",\n  \"σ<sup>-</sup>\",\n  null,\n  \"a\",\n  \"a<sup>†</sup>\",\n  \"b\",\n  \"b<sup>†</sup>\",\n  \"c\",\n  \"c<sup>†</sup>\",\n  null,\n  \"A\",\n  \"B\",\n  \"C\",\n  \"D\",\n  null\n];\n\nfunction resizeBoard(board, new_size) {\n  let size = board.length;\n\n  if (size < new_size) {\n    // Add more columns\n    let new_board = board.map((row) => {\n      for (let i = size; i < new_size; i++) row.splice(-1, 0, \"\");\n      return row;\n    });\n\n    // Add more rows\n    for (let i = size; i < new_size; i++) {\n      let lrow = Array(new_size);\n      lrow.fill(\"\");\n      new_board.splice(-1, 0, lrow);\n    }\n\n    return new_board;\n  }\n\n  if (size > new_size) {\n    // Remove columns\n    let new_board = board.map((row) => {\n      for (let i = new_size; i < size; i++) row.splice(-2, 1);\n      return row;\n    });\n\n    // Remove rows\n    for (let i = new_size; i < size; i++) new_board.splice(-2, 1);\n\n    return new_board;\n  }\n\n  // make a copy\n  return board.map((row) => {\n    return [...row];\n  });\n}\n\nfunction encodeMPO(mpo) {\n  return [\n    mpo.mpo_size,\n    ...mpo.mpo.map((item) => {\n      return [\n        item.copies,\n        ...item.matrix.flat().map((x) => {\n          return Buffer(x).toString(\"base64\").replace(/=+$/, \"\");\n        })\n      ].join(\".\");\n    })\n  ].join(\"-\");\n}\n\nfunction decodeMPO(str) {\n  let mpo_size, mpo;\n  [mpo_size, ...mpo] = str.split(\"-\");\n  mpo_size = parseInt(mpo_size, 10);\n  mpo = mpo.map((item, item_index) => {\n    let copies = 0,\n      plain,\n      matrix = [];\n    [copies, ...plain] = item.split(\".\");\n    copies = parseInt(copies, 10);\n    plain = plain.map((x) => {\n      return Buffer(x + \"==\", \"base64\").toString();\n    });\n    for (let i = 0; i < mpo_size; i++)\n      matrix[i] = plain.slice(i * mpo_size, (i + 1) * mpo_size);\n    return { copies: copies, matrix: matrix, uid: item_index };\n  });\n  return { mpo_size: mpo_size, mpo: mpo };\n}\n\nclass MainPanel extends React.Component {\n  constructor(props) {\n    super(props);\n\n    const queryParams = new URLSearchParams(window.location.search);\n    try {\n      this.state = decodeMPO(queryParams.get(\"mpo\"));\n    } catch (error) {\n      this.state = {\n        mpo_size: 2,\n        mpo: [\n          {\n            matrix: [\n              [\"1\", \"\"],\n              [\"A\", \"1\"]\n            ],\n            copies: 1,\n            uid: 0\n          }\n        ]\n      };\n    }\n    this.handleMPOSizeUpdate = this.handleMPOSizeUpdate.bind(this);\n  }\n\n  handleUpdate(ix, board, len) {\n    let new_mpo = [...this.state.mpo];\n    new_mpo[ix].matrix = board;\n    new_mpo[ix].copies = len;\n    this.setState({ mpo: new_mpo });\n  }\n\n  handleClone(ix) {\n    let new_mpo = [...this.state.mpo];\n\n    // Determine unoccupied color\n    let slots = [];\n    new_mpo.forEach((mpo) => {\n      slots[mpo.uid] = true;\n    });\n    let i = 0;\n    for (i = 0; i < slots.length; i++) if (slots[i] === undefined) break;\n\n    new_mpo.splice(ix + 1, 0, {\n      copies: 1,\n      matrix: resizeBoard(new_mpo[ix].matrix),\n      uid: i\n    });\n    this.setState({ mpo: new_mpo });\n  }\n\n  handleDelete(ix) {\n    let new_mpo = [...this.state.mpo];\n    new_mpo.splice(ix, 1);\n    this.setState({ mpo: new_mpo });\n  }\n\n  handleSwap(ix, ix2) {\n    let new_mpo = [...this.state.mpo];\n    [new_mpo[ix], new_mpo[ix2]] = [new_mpo[ix2], new_mpo[ix]];\n    this.setState({ mpo: new_mpo });\n  }\n\n  handleMPOSizeUpdate(new_size) {\n    this.setState({\n      mpo: this.state.mpo.map((el) => {\n        return {\n          copies: el.copies,\n          matrix: resizeBoard(el.matrix, new_size),\n          uid: el.uid\n        };\n      }),\n      mpo_size: new_size\n    });\n  }\n\n  render() {\n    const encodedMPO = encodeMPO(this.state);\n    let terms = [];\n    if (this.state.mpo)\n      terms = computeTT(\n        [].concat(\n          ...this.state.mpo.map((el) => {\n            return Array(el.copies).fill(el.matrix);\n          })\n        )\n      );\n    let terms_count = 0;\n    return (\n      <div className=\"main-panel\">\n        <NumberScroll\n          min=\"2\"\n          max=\"20\"\n          val={this.state.mpo_size}\n          onChange={this.handleMPOSizeUpdate}\n          label=\"MPO size:\"\n        />\n        <div className=\"clear\" />\n        {this.state.mpo.map((mpo, ix) => {\n          terms_count += mpo.copies;\n          return (\n            <Board\n              key={\"board\" + ix}\n              board={mpo.matrix}\n              site_offset={terms_count - mpo.copies}\n              site_len={mpo.copies}\n              handleUpdate={this.handleUpdate.bind(this, ix)}\n              handleClone={this.handleClone.bind(this, ix)}\n              handleDelete={this.handleDelete.bind(this, ix)}\n              handleMoveUp={this.handleSwap.bind(this, ix, ix - 1)}\n              handleMoveDown={this.handleSwap.bind(this, ix, ix + 1)}\n              mTerms={default_operators}\n              accent={mpo.uid}\n              deleteable={this.state.mpo.length > 1}\n              canMoveUp={ix > 0}\n              canMoveDown={ix < this.state.mpo.length - 1}\n            />\n          );\n        })}\n        <div className=\"product\">H =</div>\n        <div className=\"product-block\">\n          {terms.map((value, index) => {\n            return (\n              <div\n                key={index}\n                className=\"product product-term\"\n                dangerouslySetInnerHTML={{ __html: value }}\n              />\n            );\n          })}\n        </div>\n        <div>\n          <a href={\"?mpo=\" + encodedMPO}>\n            <span role=\"img\" aria-label=\"Permalink\">\n              🔗\n            </span>{\" \"}\n            Permalink to this MPO\n          </a>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default function App() {\n  return <MainPanel />;\n}\n","export function matvec(v, M) {\n  const tbc = \"...\";\n  const max_terms = 100;\n  let result = [];\n  for (let i = 0; i < M.length; i++) {\n    let row = M[i];\n    let terms = [];\n    for (let j = 0; j < row.length; j++) {\n      let M_item = row[j];\n      let v_item = v[j];\n      let do_exit = false;\n      if (M_item && v_item) {\n        for (let k = 0; k < v_item.length; k++) {\n          let v_item_term = v_item[k];\n          if (v_item_term) {\n            if (terms.length >= max_terms || v_item_term === tbc) {\n              terms.push(tbc);\n              do_exit = true;\n              break;\n            }\n            terms.push(v_item_term + \"·\" + M_item);\n          }\n        }\n      }\n      if (do_exit) {\n        break;\n      }\n    }\n    result.push(terms);\n  }\n  return result;\n}\n\nexport function computeTT(mpo_terms) {\n  if (mpo_terms.length === 1) {\n    let term = mpo_terms[0].slice(-1)[0][0];\n    if (term) return [simplify(term)];\n    return [];\n  }\n  let lhs = mpo_terms[0].map((item) => {\n    return [item[0]];\n  }); // the first column of the first MPO\n  let rhs = [mpo_terms.slice(-1)[0].slice(-1)[0]];\n  let tt = [lhs, ...mpo_terms.slice(1, -1), rhs];\n  return tt.reduce(matvec)[0].map(simplify);\n}\n\nfunction simplify(term) {\n  if (term === \"...\") return term;\n  const separator = \"·\";\n  const ignore = \"1\";\n  let result = [];\n  for (const [index, element] of term.split(separator).entries()) {\n    if (element !== ignore) result.push(element + \"<sub>\" + index + \"</sub>\");\n  }\n  if (result.length === 0) return \"1\";\n  else return result.join(separator);\n}\n","import React from \"react\";\nimport { useDropdownMenu, useDropdownToggle, Dropdown } from \"react-overlays\";\nimport NumberScroll from \"./NumberScroll.js\";\n\nfunction Menu({ operators, onItemChoose }) {\n  const [props, { toggle }] = useDropdownMenu({\n    flip: true,\n    offset: [0, 8]\n  });\n  let blockCounter = 0;\n  return (\n    <div className=\"operator-panel\" role=\"menu\" {...props}>\n      {operators.map((k, i) => {\n        if (k)\n          return (\n            <button\n              className={\"operator-panel-item cell-group-\" + blockCounter}\n              onClick={() => {\n                onItemChoose(k);\n                toggle(false);\n              }}\n              dangerouslySetInnerHTML={{ __html: k }}\n              key={i}\n            />\n          );\n        else {\n          blockCounter++;\n          return <div className=\"clear\" key={i} />;\n        }\n      })}\n      <div className=\"operator-panel-item-free\">\n        <label>custom:</label>\n        <input\n          onChange={(e) => {\n            onItemChoose(e.target.value);\n          }}\n        />\n      </div>\n    </div>\n  );\n}\n\nfunction Toggle({ value, className }) {\n  const [props, { toggle }] = useDropdownToggle();\n  return (\n    <button\n      type=\"button\"\n      className={className}\n      {...props}\n      onClick={toggle}\n      dangerouslySetInnerHTML={{ __html: value }}\n    />\n  );\n}\n\nconst DropdownButton = ({\n  show,\n  onToggle,\n  onChange,\n  drop,\n  alignEnd,\n  value,\n  options,\n  className\n}) => {\n  return (\n    <Dropdown\n      show={show}\n      onToggle={onToggle}\n      drop={drop}\n      alignEnd={alignEnd}\n      itemSelector=\"button:not(:disabled)\"\n    >\n      <span>\n        <Toggle value={value} className={className} />\n        <Menu operators={options} onItemChoose={onChange} />\n      </span>\n    </Dropdown>\n  );\n};\n\nexport function Cell(props) {\n  let classNames = \"cell cell-dropdown cell-matrix cell-no-role\";\n  return (\n    <DropdownButton\n      className={classNames}\n      onChange={props.onChange}\n      value={props.value}\n      options={props.options}\n    />\n  );\n}\n\nexport class Board extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      board: this.props.board,\n      site_len: parseInt(this.props.site_len, 10)\n    };\n    this.handleSiteLenUpdate = this.handleSiteLenUpdate.bind(this);\n    this.handleSiteOffsetUpdate = this.handleSiteOffsetUpdate.bind(this);\n  }\n\n  handleUpdate(i, j, val) {\n    let board = this.state.board;\n    board[i][j] = val === \"∅\" ? \"\" : val;\n    this.setState({\n      board: board\n    });\n    this.notifyListeners(board, null);\n  }\n\n  notifyListeners(board, site_len) {\n    if (this.props.handleUpdate) {\n      if (board === null) board = this.state.board;\n      if (site_len === null) site_len = this.state.site_len;\n      this.props.handleUpdate(board, site_len);\n    }\n  }\n\n  handleSiteLenUpdate(len) {\n    this.setState({ site_len: len });\n    this.notifyListeners(null, len);\n  }\n\n  handleSiteOffsetUpdate(offset) {\n    this.setState({ site_offset: offset });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (this.props.board !== prevProps.board) {\n      this.setState({ board: this.props.board });\n    }\n  }\n\n  render() {\n    let board_items = [];\n    for (let i = 0; i < this.state.board.length; i++) {\n      let row = this.state.board[i];\n      for (let j = 0; j < row.length; j++) {\n        board_items.push(\n          <Cell\n            key={\"c\" + i.toString() + \"/\" + j.toString()}\n            onChange={this.handleUpdate.bind(this, i, j)}\n            value={row[j]}\n            options={this.props.mTerms}\n          />\n        );\n      }\n      board_items.push(<div key={\"eol\" + i.toString()} className=\"clear\" />);\n    }\n    this.boardItems = board_items;\n    return (\n      <div className={\"board-wrapper accent-\" + this.props.accent}>\n        <div className=\"board-wrapper-controls\">\n          <NumberScroll\n            min=\"1\"\n            max=\"99\"\n            val={this.props.site_len}\n            onChange={this.handleSiteLenUpdate}\n            label=\"sites: \"\n          />\n          <button\n            className=\"cell cell-symbol push\"\n            title=\"Swap upwards\"\n            onClick={this.props.handleMoveUp}\n            disabled={!this.props.canMoveUp}\n          >\n            ▲\n          </button>\n          <button\n            className=\"cell cell-symbol\"\n            title=\"Swap downwards\"\n            onClick={this.props.handleMoveDown}\n            disabled={!this.props.canMoveDown}\n          >\n            ▼\n          </button>\n          <button\n            className=\"cell cell-symbol\"\n            title=\"Duplicate\"\n            onClick={this.props.handleClone}\n          >\n            ⎘\n          </button>\n          <button\n            className=\"cell cell-caution cell-symbol\"\n            title=\"Remove\"\n            onClick={this.props.handleDelete}\n            disabled={!this.props.deleteable}\n          >\n            🗑\n          </button>\n        </div>\n        <div className=\"board-wrapper-equation\">\n          <div className=\"board-title\">\n            <p>\n              H\n              <sub>\n                {this.props.site_offset}..\n                {this.props.site_offset + this.state.site_len - 1}\n              </sub>{\" \"}\n              =\n            </p>\n          </div>\n          <div className=\"board-wrapper-matrix\">\n            <div className=\"board-lbracket\" />\n            <div className=\"board\">{board_items}</div>\n            <div className=\"board-rbracket\" />\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import { StrictMode } from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n  rootElement\n);\n"],"sourceRoot":""}